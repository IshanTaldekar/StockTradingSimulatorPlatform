{% extends "layout.html" %}

{% block title %}
    User Portfolio
{% endblock %}

{% block main %}
    <h1>User Portfolio</h1>

    {% if api_data.message %}
        <p>Username: {{ api_data.message.username.S }}</p>
        <p>Cash: {{ api_data.message.cash.N }}</p>

        <h2>Stocks:</h2>
        <table class="table">
          <thead class="thead-light">
              <tr>
                  <th scope="col">Stock ID</th>
                  <th scope="col">Total Quantity</th>
              </tr>
          </thead>
          <tbody>
            {% for stock in api_data.message.stocks.L %}
            <tr>
                <td>{{ stock.M['stock-id'].S }}</td>
                <td>{{ stock.M.transactions.L[-1].M.quantity.N }}</td>
            </tr>
        {% endfor %}
          </tbody>
      </table>
    {% else %}
        <p>No stocks available.</p>
    {% endif %}
{% endblock %}
